<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Voice - Reviews</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f6f9;
            color: #333;
        }

        h1, h2, .navbar-brand, .btn, .form-label {
            font-family: 'Oswald', sans-serif;
        }

        /* Navbar */
        .navbar {
            background: #2c3e50 !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* Filter card */
        .filter-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            background: white;
        }

        /* Review card */
        .review-card {
            border: none;
            border-left: 6px solid #d32323; /* Chipotle Red */
            border-radius: 10px;
            background: white;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .review-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .star-rating {
            color: #ffc107;
            font-weight: bold;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark mb-5">
  <div class="container">
    <a class="navbar-brand" href="/">← Back to Dashboard</a>
    <span class="navbar-text text-white fw-bold">Customer Reviews Analysis</span>
  </div>
</nav>

<div class="container" style="max-width: 900px;">

    <div class="card p-4 mb-5 filter-card">
        <form action="/reviews" method="GET" class="row g-3 align-items-end">
            <div class="col-md-4">
                <label class="form-label fw-bold text-muted small">SELECT BRAND</label>
                <select name="brand" class="form-select border-0 bg-light">
                    <option value="Chipotle" {% if selected_brand == 'Chipotle' %}selected{% endif %}>Chipotle</option>
                    <option value="Qdoba" {% if selected_brand == 'Qdoba' %}selected{% endif %}>Qdoba</option>
                    <option value="Moes" {% if selected_brand == 'Moes' %}selected{% endif %}>Moe's</option>
                    <option value="Baja Fresh" {% if selected_brand == 'Baja Fresh' %}selected{% endif %}>Baja Fresh</option>
                    <option value="Freebirds" {% if selected_brand == 'Freebirds' %}selected{% endif %}>Freebirds</option>
                </select>
            </div>
            <div class="col-md-4">
                <label class="form-label fw-bold text-muted small">FILTER BY STARS</label>
                <select name="stars" class="form-select border-0 bg-light">
                    <option value="All">All Ratings</option>
                    <option value="1" {% if selected_stars == '1' %}selected{% endif %}>1 Star (Negative)</option>
                    <option value="2" {% if selected_stars == '2' %}selected{% endif %}>2 Stars</option>
                    <option value="3" {% if selected_stars == '3' %}selected{% endif %}>3 Stars</option>
                    <option value="4" {% if selected_stars == '4' %}selected{% endif %}>4 Stars</option>
                    <option value="5" {% if selected_stars == '5' %}selected{% endif %}>5 Stars (Positive)</option>
                </select>
            </div>
            <div class="col-md-4">
                <button type="submit" class="btn btn-danger w-100 fw-bold shadow-sm" style="background-color: #d32323; border:none;">
                    SEARCH REVIEWS
                </button>
            </div>
        </form>
    </div>

    <div class="list-group bg-transparent">
        {% if reviews %}
            {% for r in reviews %}
            <div class="list-group-item p-4 review-card">
                <div class="d-flex w-100 justify-content-between align-items-center mb-2">
                    <h5 class="mb-0 fw-bold" style="color: #2c3e50;">{{ r.brand }} <small class="text-muted fw-normal">| {{ r.region }}</small></h5>
                    <small class="text-muted">{{ r.date }}</small>
                </div>

                <p class="mb-3 text-secondary" style="line-height: 1.6;">{{ r.text }}</p>

                <div class="d-flex align-items-center justify-content-between border-top pt-3 mt-2">
                    <span class="star-rating">★ {{ r.stars }}</span>
                    <span class="badge bg-light text-dark border">Useful: {{ r.useful }}</span>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="text-center p-5">
                <h4 class="text-muted">No reviews found.</h4>
                <p>Try adjusting your filters.</p>
            </div>
        {% endif %}
    </div>
</div>

</body>
</html>
